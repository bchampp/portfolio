<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/logo.png"/><meta name="description" content="Brent Champion Portfolio Website"/><meta name="og:title" content="brent champion | projects"/><meta name="twitter:card" content="summary_large_image"/><script src="https://kit.fontawesome.com/9506f5416a.js" crossorigin="anonymous"></script><title>brent champion | autostitch</title><link rel="preload" href="/_next/static/css/998cf97e7ef065282b65.css" as="style"/><link rel="stylesheet" href="/_next/static/css/998cf97e7ef065282b65.css" data-n-g=""/><link rel="preload" href="/_next/static/css/bbaf7d2c7432f8cdca47.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bbaf7d2c7432f8cdca47.css" data-n-p=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-b5980125567aa13824c5.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.65db85aa1f84ff9c0177.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-45c21f9aaddc7847481b.js" as="script"/><link rel="preload" href="/_next/static/chunks/16214fe22afcf297a2978e3ea1a7035c174a4ecd.a57b1c3110515d55b2e8.js" as="script"/><link rel="preload" href="/_next/static/chunks/8ee93e01036bb5bdd30ff766913d6daf4eedeeb0.cfc4fe82273e570fd7e2.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/projects/%5Bid%5D-0916ce2f81b76c3b0344.js" as="script"/></head><body><div id="__next"><div class="page_layout__353Au"><header class="page_nav__3FrTD"><a href="/">brent champion</a><ul><li><a href="/about">about</a></li><li><a href="/work">work</a></li><li><a class="page_active__1F-OX">projects</a></li><li><a href="/resume">resume</a></li><li><div class="page_toggle__1_3Bo"><input type="checkbox" class="page_checkbox__1Xr0B" id="chk"/><label class="page_label__2RTDW" for="chk"><i class="fas fa-moon"></i><i class="fas fa-sun"></i><div class="page_ball__1m8-e"></div></label></div></li></ul><a class="page_icon__2ttyg"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></a></header><main><div class="post_container__D1-VT"><article><div class="post_title__MagQA"><h1>AutoStitch</h1><div class="post_subtitle__34JdB"><h2>A C++ application to merge panoramas</h2><h3 class="post_date__3bAtA"><div><time dateTime="2019-12-01">December 2019</time></div></h3></div><div class="post_source__181tU"></div><div class="post_tags__3ov2L"><h4>Tags: </h4><div class="post_tag__DGU7G"><a href="/tags/c++">c++</a></div><div class="post_tag__DGU7G"><a href="/tags/opencv">opencv</a></div><div class="post_tag__DGU7G"><a href="/tags/machine learning">machine learning</a></div></div></div><div class="post_post__1Lsln"><p>AutoStitch is an OpenCV application which uses Machine Learning to construct a panorama image from an unordered set of images.</p>
<h2>How it works</h2>
<p>Theres two primary parts to the program: Feature Detection &#x26; Image Construction.
We built a custom <code>subImage</code> class to hold information about each image, as well as how it relates to all of the other subImages.
Each subImage contains an array of fitness scores to all of the other images.
One way to think of the implementation is a weighted graph, where images are the vertices, and weight between images is the matching score.</p>
<h3>Pre-Processing</h3>
<p>The first step to any Machine Vision problem is applying necessary pre-processing to the images. In our case, we simply added padding to all of the images to ensure that the images were all normalized before we tried evaluating matching potential with other images.</p>
<h3>Feature Detection</h3>
<p>The ORB Feature Detection module was used to determine a matching fitness score between each pair of images.
Our fitness scoring algorithm was simply based on the euclidian distance between matches, such to minimize this distance.
Throughout the feature detection algorithm, each subImage object gets populated with fitness scores to all the other images.</p>
<h3>Composition</h3>
<p>The first step of the composition algorithm is finding the subImage with the highest overall fitness score.
This means that this specific image has the highest matching potential to all other images, and so it is chosen as the center image in the composition.</p>
<p>A helper function is then used to merge the next best image, by calculating the homography matrix and performing the desired geometric transformation. This helper function is called recursively through all the images, adding the next <i>best fit</i> on each iteration. The result of this process is a refined composite image.</p>
<p>After the first composite image is created, a back-tracking algorithm goes through and re-evaluates any images that were left out against the panorama image. This ensured that no false negatives were left behind, in case the matching fitness score for a subImage was not high enough before building the composite image. In some cases, the fitness score for subImages improved against the composite image, meaning it should have been included.</p>
<h3>Results</h3>
<p>The results of the software can be seen below, on a sample of the St. James church in Kingston.
<img src="/projects/autostitch/results.png" alt="AutoStitch Result"></p>
</div><div class="post_back__16JYp"><a href="/projects">‚Üê Back to <!-- -->Projects</a></div></article></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"autostitch","contentHtml":"\u003cp\u003eAutoStitch is an OpenCV application which uses Machine Learning to construct a panorama image from an unordered set of images.\u003c/p\u003e\n\u003ch2\u003eHow it works\u003c/h2\u003e\n\u003cp\u003eTheres two primary parts to the program: Feature Detection \u0026#x26; Image Construction.\r\nWe built a custom \u003ccode\u003esubImage\u003c/code\u003e class to hold information about each image, as well as how it relates to all of the other subImages.\r\nEach subImage contains an array of fitness scores to all of the other images.\r\nOne way to think of the implementation is a weighted graph, where images are the vertices, and weight between images is the matching score.\u003c/p\u003e\n\u003ch3\u003ePre-Processing\u003c/h3\u003e\n\u003cp\u003eThe first step to any Machine Vision problem is applying necessary pre-processing to the images. In our case, we simply added padding to all of the images to ensure that the images were all normalized before we tried evaluating matching potential with other images.\u003c/p\u003e\n\u003ch3\u003eFeature Detection\u003c/h3\u003e\n\u003cp\u003eThe ORB Feature Detection module was used to determine a matching fitness score between each pair of images.\r\nOur fitness scoring algorithm was simply based on the euclidian distance between matches, such to minimize this distance.\r\nThroughout the feature detection algorithm, each subImage object gets populated with fitness scores to all the other images.\u003c/p\u003e\n\u003ch3\u003eComposition\u003c/h3\u003e\n\u003cp\u003eThe first step of the composition algorithm is finding the subImage with the highest overall fitness score.\r\nThis means that this specific image has the highest matching potential to all other images, and so it is chosen as the center image in the composition.\u003c/p\u003e\n\u003cp\u003eA helper function is then used to merge the next best image, by calculating the homography matrix and performing the desired geometric transformation. This helper function is called recursively through all the images, adding the next \u003ci\u003ebest fit\u003c/i\u003e on each iteration. The result of this process is a refined composite image.\u003c/p\u003e\n\u003cp\u003eAfter the first composite image is created, a back-tracking algorithm goes through and re-evaluates any images that were left out against the panorama image. This ensured that no false negatives were left behind, in case the matching fitness score for a subImage was not high enough before building the composite image. In some cases, the fitness score for subImages improved against the composite image, meaning it should have been included.\u003c/p\u003e\n\u003ch3\u003eResults\u003c/h3\u003e\n\u003cp\u003eThe results of the software can be seen below, on a sample of the St. James church in Kingston.\r\n\u003cimg src=\"/projects/autostitch/results.png\" alt=\"AutoStitch Result\"\u003e\u003c/p\u003e\n","title":"AutoStitch","startDate":"2019-12-01","endDate":"2019-12-09","image":"","subtitle":"A C++ application to merge panoramas","tags":["c++","opencv","machine learning"],"type":"projects","link":"https://github.com/bchampp/autostitch","exists":true}},"__N_SSG":true},"page":"/projects/[id]","query":{"id":"autostitch"},"buildId":"CNCuuZmxLlgs6VUYWQV5Z","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["link",{"rel":"icon","href":"/logo.png"}],["meta",{"name":"description","content":"Brent Champion Portfolio Website"}],["meta",{"name":"og:title","content":"brent champion | projects"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["script",{"src":"https://kit.fontawesome.com/9506f5416a.js","crossOrigin":"anonymous"}],["title",{"children":"brent champion | autostitch"}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-2be76cc2531af487e612.js"></script><script src="/_next/static/chunks/main-b5980125567aa13824c5.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" async=""></script><script src="/_next/static/chunks/commons.65db85aa1f84ff9c0177.js" async=""></script><script src="/_next/static/chunks/pages/_app-45c21f9aaddc7847481b.js" async=""></script><script src="/_next/static/chunks/16214fe22afcf297a2978e3ea1a7035c174a4ecd.a57b1c3110515d55b2e8.js" async=""></script><script src="/_next/static/chunks/8ee93e01036bb5bdd30ff766913d6daf4eedeeb0.cfc4fe82273e570fd7e2.js" async=""></script><script src="/_next/static/chunks/pages/projects/%5Bid%5D-0916ce2f81b76c3b0344.js" async=""></script><script src="/_next/static/CNCuuZmxLlgs6VUYWQV5Z/_buildManifest.js" async=""></script><script src="/_next/static/CNCuuZmxLlgs6VUYWQV5Z/_ssgManifest.js" async=""></script></body></html>